<UserControl x:Class="QuantFlow.UI.WPF.Views.AlgorithmsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1200"
             Background="{DynamicResource BackgroundColor}">
    <ScrollViewer VerticalScrollBarVisibility="Auto" 
                  HorizontalScrollBarVisibility="Disabled"
                  Padding="40,20,40,40">
        <StackPanel>
            <!-- Page Header -->
            <Grid Margin="0,0,0,32">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="My Algorithms" 
                           FontSize="28" 
                           FontWeight="Bold" 
                           Foreground="{DynamicResource TextPrimaryColor}"
                           FontFamily="Segoe UI"
                           VerticalAlignment="Center"/>

                <Button Grid.Column="1"
                        Content="+ Create Algorithm"
                        Style="{StaticResource PrimaryButton}"
                        Command="{Binding CreateAlgorithmCommand}"
                        Height="44"
                        Padding="24,0"/>
            </Grid>

            <!-- Algorithm Cards -->
            <ItemsControl ItemsSource="{Binding Algorithms}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="{DynamicResource SurfaceColor}"
                                BorderBrush="{DynamicResource BorderColor}"
                                BorderThickness="1"
                                CornerRadius="12"
                                Padding="24"
                                Margin="0,0,0,20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Left Side: Algorithm Info -->
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="{Binding Name}" 
                                               FontSize="18" 
                                               FontWeight="SemiBold"
                                               Foreground="{DynamicResource TextPrimaryColor}"/>

                                    <TextBlock Text="{Binding Description}" 
                                               FontSize="14"
                                               Foreground="{DynamicResource TextSecondaryColor}"
                                               Margin="0,8,0,0"
                                               TextWrapping="Wrap"/>

                                    <Grid Margin="0,16,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0" Margin="0,0,32,0">
                                            <TextBlock Text="Status" 
                                                       FontSize="12"
                                                       Foreground="{DynamicResource TextSecondaryColor}"/>
                                            <TextBlock Text="{Binding Status}" 
                                                       FontSize="14"
                                                       FontWeight="Medium"
                                                       Foreground="{DynamicResource AccentColor}"
                                                       Margin="0,4,0,0"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Margin="0,0,32,0">
                                            <TextBlock Text="Version" 
                                                       FontSize="12"
                                                       Foreground="{DynamicResource TextSecondaryColor}"/>
                                            <TextBlock Text="{Binding Version}" 
                                                       FontSize="14"
                                                       FontWeight="Medium"
                                                       Foreground="{DynamicResource TextPrimaryColor}"
                                                       Margin="0,4,0,0"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="2" Margin="0,0,32,0">
                                            <TextBlock Text="Language" 
                                                       FontSize="12"
                                                       Foreground="{DynamicResource TextSecondaryColor}"/>
                                            <TextBlock Text="{Binding ProgrammingLanguage}" 
                                                       FontSize="14"
                                                       FontWeight="Medium"
                                                       Foreground="{DynamicResource TextPrimaryColor}"
                                                       Margin="0,4,0,0"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="3">
                                            <TextBlock Text="Last Updated" 
                                                       FontSize="12"
                                                       Foreground="{DynamicResource TextSecondaryColor}"/>
                                            <TextBlock Text="{Binding UpdatedAt, StringFormat='{}{0:MMM dd, yyyy}'}" 
                                                       FontSize="14"
                                                       FontWeight="Medium"
                                                       Foreground="{DynamicResource TextPrimaryColor}"
                                                       Margin="0,4,0,0"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>

                                <!-- Right Side: Action Buttons -->
                                <StackPanel Grid.Column="1" 
                                            Orientation="Horizontal" 
                                            VerticalAlignment="Top">
                                    <Button Content="Edit"
                                            Style="{StaticResource SecondaryButton}"
                                            Command="{Binding DataContext.EditAlgorithmCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            CommandParameter="{Binding}"
                                            Width="80"
                                            Height="36"
                                            Margin="0,0,8,0"/>

                                    <Button Content="Delete"
                                            Style="{StaticResource DangerButton}"
                                            Command="{Binding DataContext.DeleteAlgorithmCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                            CommandParameter="{Binding}"
                                            Width="80"
                                            Height="36"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- Empty State -->
            <Border Background="{DynamicResource SurfaceColor}"
                    BorderBrush="{DynamicResource BorderColor}"
                    BorderThickness="1"
                    CornerRadius="12"
                    Padding="60"
                    Visibility="{Binding HasNoAlgorithms, Converter={StaticResource BoolToVisibilityConverter}}">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="🤖" 
                               FontSize="64" 
                               HorizontalAlignment="Center"
                               Margin="0,0,0,16"/>
                    <TextBlock Text="No algorithms yet" 
                               FontSize="20"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextPrimaryColor}"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,8"/>
                    <TextBlock Text="Create your first trading algorithm to get started" 
                               FontSize="14"
                               Foreground="{DynamicResource TextSecondaryColor}"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,24"/>
                    <Button Content="+ Create Algorithm"
                            Style="{StaticResource PrimaryButton}"
                            Command="{Binding CreateAlgorithmCommand}"
                            Height="44"
                            Padding="24,0"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>