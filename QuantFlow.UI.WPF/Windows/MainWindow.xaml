
<Window x:Class="QuantFlow.UI.WPF.Windows.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:QuantFlow.UI.WPF.Views"
        Title="QuantFlow - Dashboard" 
        Height="1340" 
        Width="1550"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        ResizeMode="CanResize"
        Background="{DynamicResource BackgroundColor}">
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="0" 
                      ResizeBorderThickness="5"
                      CornerRadius="0"
                      GlassFrameThickness="0"/>
    </WindowChrome.WindowChrome>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="60"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Top Bar -->
        <views:TopBarView x:Name="TopBar" Grid.Row="0"/>

        <!-- Main Content Area -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Sidebar -->
            <Border Grid.Column="0" 
                    Background="{DynamicResource PrimaryColor}" 
                    BorderBrush="{DynamicResource BorderColor}" 
                    BorderThickness="0,0,1,0">
                <StackPanel Margin="0,16,0,0">
                    <!-- Navigation Menu -->
                    <Button Style="{StaticResource SidebarButtonStyle}" 
                            Margin="8,4"
                            Command="{Binding NavigateToDashboardCommand}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE80F;" FontFamily="Segoe MDL2 Assets" FontSize="16" Margin="0,0,12,0"/>
                            <TextBlock Text="Dashboard" FontSize="14"/>
                        </StackPanel>
                    </Button>

                    <Button Style="{StaticResource SidebarButtonStyle}" 
                            Margin="8,4"
                            Command="{Binding NavigateToPortfoliosCommand}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE7C5;" FontFamily="Segoe MDL2 Assets" FontSize="16" Margin="0,0,12,0"/>
                            <TextBlock Text="Portfolios" FontSize="14"/>
                        </StackPanel>
                    </Button>
                    
                    <Button Style="{StaticResource SidebarButtonStyle}" 
                            Margin="8,4"
                            Command="{Binding NavigateToPositionsLibraryCommand}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE8F1;" FontFamily="Segoe MDL2 Assets" FontSize="16" Margin="0,0,12,0"/>
                            <TextBlock Text="Positions" FontSize="14"/>
                        </StackPanel>
                    </Button>

                    <Button Style="{StaticResource SidebarButtonStyle}" 
                            Margin="8,4"
                            Command="{Binding NavigateToAlgorithmsCommand}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE9D9;" FontFamily="Segoe MDL2 Assets" FontSize="16" Margin="0,0,12,0"/>
                            <TextBlock Text="Algorithms" FontSize="14"/>
                        </StackPanel>
                    </Button>

                    <Button Style="{StaticResource SidebarButtonStyle}" 
                            Margin="8,4"
                            Command="{Binding NavigateToBacktestsCommand}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE9F9;" FontFamily="Segoe MDL2 Assets" FontSize="16" Margin="0,0,12,0"/>
                            <TextBlock Text="Backtests" FontSize="14"/>
                        </StackPanel>
                    </Button>

                    <Expander Style="{StaticResource SidebarExpanderStyle}">
                        <Expander.Header>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="&#xE9D9;" FontFamily="Segoe MDL2 Assets" FontSize="16" Margin="0,0,12,0"/>
                                <TextBlock Text="Market Data" FontSize="14"/>
                            </StackPanel>
                        </Expander.Header>

                        <StackPanel Margin="20,4,0,0">
                            <Button Style="{StaticResource SidebarButtonStyle}" 
                                    Margin="0,2"
                                    Command="{Binding NavigateToKrakenMarketDataCommand}">
                                <TextBlock Text="Kraken" FontSize="13"/>
                            </Button>

                            <Button Style="{StaticResource SidebarButtonStyle}" 
                                    Margin="0,2"
                                    Command="{Binding NavigateToKuCoinMarketDataCommand}">
                                <TextBlock Text="KuCoin" FontSize="13"/>
                            </Button>
                        </StackPanel>
                    </Expander>

                    <Button Style="{StaticResource SidebarButtonStyle}" 
                            Margin="8,4"
                            Command="{Binding NavigateToSettingsCommand}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="&#xE713;" FontFamily="Segoe MDL2 Assets" FontSize="16" Margin="0,0,12,0"/>
                            <TextBlock Text="Settings" FontSize="14"/>
                        </StackPanel>
                    </Button>
                    
                </StackPanel>
            </Border>

            <!-- Main Content Area with ContentControl for Navigation -->
            <ContentControl Grid.Column="1" 
                          Content="{Binding CurrentView}"/>
        </Grid>
    </Grid>
</Window>